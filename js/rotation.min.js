/***********************************************
	Frame flipper extracted from library.js
************************************************/window.eveo||(window.eveo={});eveo.browser={IE:navigator.appName=="Microsoft Internet Explorer",isiPAD:/iPad/.exec(navigator.userAgent)};eveo.library={log:function(e){window.console&&window.console.log&&window.console.log(e)},getElement:function(e){typeof e=="string"&&(e=document.getElementById(e));return e}};eveo.rotater=function(e){function y(){N();T()}function b(){m&&m()}function w(e){var t=[];for(n=0,r=u.length;n<r;n++)t.push(u[n]+e.padWithZeroesToLength(c)+a[n]);return t}function E(e){if(s){g.addClass("no-flick");s.removeEventListener("touchmove",S,!1);s.removeEventListener("touchmove",E,!1)}}function S(e){e.preventDefault();e.stopPropagation();var n=e.touches[0].pageX;h<n?t.rotateForward():h>n&&t.rotateBackward();h=n;return!1}function x(e){if(s){g.removeClass("no-flick");s.addEventListener("touchmove",S,!1);s.addEventListener("touchend",E,!1)}h=e.touches[0].pageX}function T(){s&&s.addEventListener("touchstart",x,!1)}function N(){var e,t,n,r,i,s;r=p-Math.floor(f/2);r<1&&(r+=o);for(e=0;e<f;e++){s=w(r);for(t=0,n=s.length;t<n;t++){i=document.createElement("img");i.src=s[t]}r++;r>o&&(r=1)}}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g;t=this;if(!e.target)throw"missing target";i=[];for(n=0,r=e.target.length;n<r;n++)i.push(eveo.library.getElement(e.target[n]));e.touchArea?s=eveo.library.getElement(e.touchArea):eveo.library.log("missing target area - but this is okay if you are controlling the rotation manually: rotateForward,rotateBackward,rotateToFrame");s||eveo.library.log("missing target area - unable to find element ("+e.touchArea+") in dom");if(!e.numberOfFrames)throw"missing number of frames";o=e.numberOfFrames;if(!e.filePath||!e.fileName)throw"missing file path or file name";u=[];for(n=0,r=e.filePath.length;n<r;n++)u.push(e.filePath[n]+e.fileName[n]);if(!e.fileExt)throw"missing file extention";a=[];for(n=0,r=e.fileExt.length;n<r;n++)a.push("."+e.fileExt[n]);if(!e.cacheSize)throw"missing cache size";f=e.cacheSize;e.infiniteRotation!=undefined?d=e.infiniteRotation:d=!0;e.onRotate&&(m=e.onRotate);p=l=e.startingFrame&&e.startingFrame>0&&e.startingFrame<o?e.startingFrame:1;c=(o+"").length;g=$("#page-container");t.resetRotation=function(){p=l;var e=w(p);for(n=0,r=e.length;n<r;n++)i[n].src=e[n]};t.rotateForward=function(){var e,t,n;p++;p>o&&(p=d?1:o);e=w(p);for(t=0,n=e.length;t<n;t++)i[t].src=e[t];b();N()};t.rotateBackward=function(){var e,t,n;p--;p<1&&(p=d?o:1);e=w(p);for(t=0,n=e.length;t<n;t++)i[t].src=e[t];b();N()};t.rotateToFrame=function(e,n){function i(){if(e>p){t.rotateForward();v=setTimeout(i,r)}else if(e<p){t.rotateBackward();v=setTimeout(i,r)}else{clearTimeout(v);n&&n()}}var r=10;v&&clearTimeout(v);v=setTimeout(i,r)};t.rotateToFrameShortest=function(e,n){function a(){if(p===e){clearTimeout(v);n&&n()}else{u?t.rotateForward():t.rotateBackward();v=setTimeout(a,r)}}var r=10,i=e>p?e-p:e-p+o,s=e<p?p-e:p-e+o,u=i<s;v&&clearTimeout(v);v=setTimeout(a,r)};y();return t};Number.prototype.padWithZeroesToLength=function(e){var t=this.toString(),n=t.length,r="000000000000000000000000";if(n>=e)retVal=t;else{retVal=r+t;retVal=retVal.substring(retVal.length-e)}return retVal};